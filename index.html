<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Agenda Mensal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#1f6fff">
<link rel="manifest" href="manifest.json">

<style>
body {
  font-family: system-ui, Arial, sans-serif;
  background: #f4f6fa;
  margin: 0;
  padding: 15px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

select {
  padding: 6px;
  border-radius: 8px;
}

.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.day-name {
  text-align: center;
  font-size: 12px;
  color: #666;
}

.day {
  background: #fff;
  border-radius: 10px;
  min-height: 70px;
  padding: 5px;
  cursor: pointer;
  position: relative;
}

.day span {
  font-size: 12px;
  color: #444;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  margin-right: 3px;
}

.panel {
  background: #fff;
  border-radius: 15px;
  padding: 15px;
  margin-top: 15px;
}

.event {
  margin-bottom: 12px;
}

.btn {
  display: inline-block;
  background: #1f6fff;
  color: #fff;
  padding: 6px 12px;
  border-radius: 8px;
  text-decoration: none;
  font-size: 14px;
}
</style>
</head>

<body>

<header>
  <h2 id="monthTitle"></h2>
  <select id="monthSelect"></select>
</header>

<div class="calendar" id="calendar"></div>

<div class="panel" id="dayPanel">
  <h3 id="dayTitle">Selecione um dia</h3>
  <div id="dayEvents"></div>
</div>

<hr>

<h3>âž• Criar evento</h3>

<input id="proj" placeholder="Projeto">
<input type="color" id="color">
<select id="type">
  <option>Aula</option>
  <option>ReuniÃ£o</option>
</select>
<input id="withWho" placeholder="Com quem Ã© a reuniÃ£o (opcional)">
<input id="link" placeholder="Link do site (opcional)">
<input type="date" id="date">
<button onclick="addEvent()">Adicionar</button>

<script>
const events = JSON.parse(localStorage.getItem("events")) || [];
const calendar = document.getElementById("calendar");
const monthSelect = document.getElementById("monthSelect");
const monthTitle = document.getElementById("monthTitle");
const dayPanel = document.getElementById("dayEvents");
const dayTitle = document.getElementById("dayTitle");

let current = new Date();

function save() {
  localStorage.setItem("events", JSON.stringify(events));
}

function setupMonths() {
  for (let i = 0; i < 12; i++) {
    let opt = document.createElement("option");
    opt.value = i;
    opt.text = new Date(2026, i).toLocaleString("pt-BR", { month: "long" });
    monthSelect.appendChild(opt);
  }
  monthSelect.value = current.getMonth();
}

function renderCalendar() {
  calendar.innerHTML = "";
  const year = current.getFullYear();
  const month = current.getMonth();
  monthTitle.textContent = current.toLocaleString("pt-BR", { month: "long", year: "numeric" });

  const first = new Date(year, month, 1).getDay();
  const days = new Date(year, month + 1, 0).getDate();

  ["D","S","T","Q","Q","S","S"].forEach(d => {
    calendar.innerHTML += `<div class="day-name">${d}</div>`;
  });

  for (let i = 0; i < first; i++) calendar.innerHTML += `<div></div>`;

  for (let d = 1; d <= days; d++) {
    const dateStr = `${year}-${String(month+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
    const dayEvents = events.filter(e => e.date === dateStr);
    calendar.innerHTML += `
      <div class="day" onclick="openDay('${dateStr}')">
        <span>${d}</span><br>
        ${dayEvents.map(e => `<span class="dot" style="background:${e.color}"></span>`).join("")}
      </div>`;
  }
}

function openDay(date) {
  dayTitle.textContent = new Date(date).toLocaleDateString("pt-BR", { weekday:"long", day:"numeric", month:"long" });
  dayPanel.innerHTML = "";
  events.filter(e => e.date === date).forEach(e => {
    dayPanel.innerHTML += `
      <div class="event">
        <strong style="color:${e.color}">${e.project}</strong><br>
        ${e.type}<br>
        ${e.withWho ? "ðŸ‘¤ Com: " + e.withWho + "<br>" : ""}
        ${e.link ? `<a class="btn" href="${e.link}" target="_blank">ðŸ”— Abrir site</a>` : ""}
      </div>`;
  });
}

function addEvent() {
  events.push({
    project: proj.value,
    color: color.value || "#1f6fff",
    type: type.value,
    withWho: withWho.value,
    link: link.value,
    date: date.value
  });
  save();
  renderCalendar();
}

monthSelect.onchange = e => {
  current.setMonth(e.target.value);
  renderCalendar();
};

setupMonths();
renderCalendar();
</script>

</body>
</html>
