<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Agenda Mensal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
* { font-family: 'Outfit', system-ui, sans-serif; }
.calendar-day { cursor:pointer; transition:0.2s }
.calendar-day:hover { transform:scale(1.05) }
.event-dot { width:8px;height:8px;border-radius:999px;display:inline-block;margin-right:3px }
</style>
</head>

<body class="bg-slate-100 min-h-screen">

<div class="max-w-4xl mx-auto p-4">

<!-- HEADER -->
<header class="flex items-center justify-between mb-4">
  <h1 class="text-2xl font-bold">ðŸ“… Agenda Mensal</h1>
  <div class="flex gap-2">
    <button onclick="changeMonth(-1)" class="px-3 py-1 bg-white rounded">â—€</button>
    <button onclick="goToday()" class="px-3 py-1 bg-blue-500 text-white rounded">Hoje</button>
    <button onclick="changeMonth(1)" class="px-3 py-1 bg-white rounded">â–¶</button>
  </div>
</header>

<h2 id="monthTitle" class="text-center text-xl font-semibold mb-3"></h2>

<!-- CALENDÃRIO -->
<div class="grid grid-cols-7 gap-2 mb-6" id="calendar"></div>

<!-- PAINEL DO DIA -->
<div id="dayPanel" class="hidden bg-white rounded-xl p-4 mb-6 shadow">
  <h3 id="dayTitle" class="font-bold mb-3"></h3>
  <div id="dayEvents" class="space-y-3"></div>
</div>

<!-- FORMULÃRIO -->
<div class="bg-white rounded-xl p-4 shadow">
<h3 class="font-bold mb-3">âž• Criar evento</h3>

<input id="project" placeholder="Projeto" class="w-full mb-2 p-2 border rounded">
<input type="color" id="color" value="#3b82f6" class="mb-2">

<select id="type" class="w-full mb-2 p-2 border rounded">
  <option>Aula</option>
  <option>ReuniÃ£o</option>
</select>

<input id="withWho" placeholder="Com quem Ã© a reuniÃ£o (opcional)" class="w-full mb-2 p-2 border rounded">
<input id="link" placeholder="Link do site (opcional)" class="w-full mb-2 p-2 border rounded">

<label class="text-sm font-semibold">Datas exatas (separadas por vÃ­rgula)</label>
<input id="dates" placeholder="03/07/2026, 10/07/2026, 17/07/2026" class="w-full mb-3 p-2 border rounded">

<button onclick="addEvents()" class="w-full bg-blue-500 text-white py-2 rounded">
Criar eventos
</button>
</div>

</div>

<script>
let current = new Date();
let events = JSON.parse(localStorage.getItem("events")||"[]");

function save(){ localStorage.setItem("events",JSON.stringify(events)); }

function render(){
const cal=document.getElementById("calendar");
cal.innerHTML="";
const y=current.getFullYear(), m=current.getMonth();
document.getElementById("monthTitle").textContent=
current.toLocaleDateString("pt-BR",{month:"long",year:"numeric"});

const first=new Date(y,m,1).getDay();
const days=new Date(y,m+1,0).getDate();

["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"].forEach(d=>{
cal.innerHTML+=`<div class="text-center font-semibold">${d}</div>`;
});

for(let i=0;i<first;i++) cal.innerHTML+="<div></div>";

for(let d=1;d<=days;d++){
const date=`${y}-${String(m+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
const dayEvents=events.filter(e=>e.date===date);
cal.innerHTML+=`
<div onclick="openDay('${date}')"
class="calendar-day bg-white rounded p-2 text-sm">
<b>${d}</b><br>
${dayEvents.map(e=>`<span class="event-dot" style="background:${e.color}"></span>`).join("")}
</div>`;
}
}

function openDay(date){
document.getElementById("dayPanel").classList.remove("hidden");
document.getElementById("dayTitle").textContent=
new Date(date+"T12:00").toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"});

const box=document.getElementById("dayEvents");
box.innerHTML="";
events.filter(e=>e.date===date).forEach((e,i)=>{
box.innerHTML+=`
<div class="border-l-4 p-3 rounded" style="border-color:${e.color}">
<b>${e.project}</b><br>
${e.type}<br>
${e.withWho?`ðŸ‘¤ ${e.withWho}<br>`:""}
${e.link?`<a href="${e.link}" target="_blank" class="text-blue-600">ðŸ”— Abrir site</a><br>`:""}
<button onclick="removeEvent(${i})" class="text-red-500 text-sm mt-1">Excluir</button>
</div>`;
});
}

function removeEvent(i){
events.splice(i,1);
save(); render();
document.getElementById("dayPanel").classList.add("hidden");
}

function addEvents(){
const p=project.value.trim();
if(!p) return alert("Informe o projeto");
const ds=dates.value.split(",").map(d=>d.trim());
ds.forEach(d=>{
const [dia,mes,ano]=d.split("/");
events.push({
project:p,
color:color.value,
type:type.value,
withWho:withWho.value,
link:link.value,
date:`${ano}-${mes}-${dia}`
});
});
save();
dates.value="";
render();
}

function changeMonth(n){ current.setMonth(current.getMonth()+n); render(); }
function goToday(){ current=new Date(); render(); }

render();
</script>

</body>
</html>
